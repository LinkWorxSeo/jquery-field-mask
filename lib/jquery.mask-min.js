(function(a){a.fn.mask=function(b){function f(b){var c=b.attr("id")+"_masked";var d=document.createElement("input");d.setAttribute("id",c);d.setAttribute("type","password");d.setAttribute("style","display:none;");d.value=b.val();b.after(d);return a("#"+c)}var c=this;var d={toggle:".toggle"};if(b){a.extend(d,b)}var e=a(d.toggle);e.change(function(){var b=a(this).is(":checked");e.each(function(){a(this).attr("checked",b)});c.each(function(){b?this.reveal():this.mask()})});return this.each(function(){var b=a("#"+this.id);var c=f(b);this.reveal=function(){b.show();c.hide()};this.mask=function(){b.hide();c.show()};c.change(function(){b.val(c.val());return false});b.change(function(){c.val(b.val());return false});this.mask()})}})(jQuery)